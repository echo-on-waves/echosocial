<% @widget.ancestors.each do |ancestor| %>
  <%= link_to_remote(ancestor.display_name, :url => { :controller => 'widget', :action => 'load_form', :id => ancestor.id }) %> &raquo;
<% end -%>
<b><%= @widget.display_name %></b>
<% widget ||= @widget -%>
<% form_remote_tag(:url => {
                     :controller => 'widget',
                     :action => 'save',
                     :id => widget.id
                   },
                   :loading => show_spinner("save_widget"),
                   :loaded => hide_spinner("save_widget")) do -%>
<% if widget.empty? -%>
  <%= render :partial => 'edit_box', :locals => { :widget => widget } %>
<% else -%>
  <%= render :partial => 'edit_widget', :locals => { :widget => widget } %>
<% end -%>
<%= link_to_remote("Remove", :url => { :controller => 'widget', :action => 'remove', :id => widget.id }) %>
<br />
<%= spinner("save_widget") %>
<%= submit_tag "Save" %>
<% end -%>
